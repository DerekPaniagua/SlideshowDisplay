<!DOCTYPE html>
<html>
<head>
    <title>Google Calendar and Slideshow</title>
    <link rel="stylesheet" href="/app.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css" />
<body>
    <div class="fullscreen">
        <div id="calendar" class="box calendar-background">
        </div>
        <div id="slideshow" class="box">
            <img id="slideshow-image" class="slideshow" src="https://localhost:3000/image"/>
        </div>

    </div>
</body>
<script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
<script>
    
    function fetch_image() {
        var image_element = document.getElementById("slideshow-image");
        image_element.src = `http://localhost:3000/image?${new Date().getTime()}`;
        console.log("Retireving new image")
    };
    fetch_image();
    setInterval(fetch_image, 5000);

    const calendar = new Calendar('#calendar', {
        defaultView: 'week',
        template: {
            time(event) {
                const { start, end, title } = event;

                return `<span style="color: white;">${formatTime(start)}~${formatTime(end)} ${title}</span>`;
            },
            allday(event) {
                return `<span style="color: gray;">${event.title}</span>`;
            },
        },
        calendars: [
            {
                id: 'cal1',
                name: 'Personal',
                backgroundColor: '#03bd9e',
            },
            {
                id: 'cal2',
                name: 'Work',
                backgroundColor: '#00a9ff',
            },
        ],
    });

</script>
</html>
